<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>RV Pel√∫cias</title>
        <meta name="description" content="Cat√°logo de pel√∫cias originais √† venda ‚Äì Feisty Pets, Disney e mais. Fale no WhatsApp para comprar." />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
        <script src="https://cdn.tailwindcss.com"></script>
        <style>
            :root {
                color-scheme: dark light;
            }
            body {
                font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
            }
            .line-clamp-2 {
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }
        
            /* === VIEWER (Lightbox) === */
            #viewer {
                position: fixed;
                inset: 0;
                display: none; /* inicia oculto */
                align-items: center;
                justify-content: center;
                background: rgba(0, 0, 0, 0.75);
                border: none;
                margin: 0;
                padding: 0;
                z-index: 9999;
            }
            #viewer[open] {
                display: flex; /* s√≥ aparece quando aberto */
            }
            #viewerImg {
                max-width: 90vw;
                max-height: 90vh;
                width: auto;
                height: auto;
                object-fit: contain;
                border-radius: 1rem;
                margin: auto;
                display: block;
            }
            #viewer [data-nav] {
                position: absolute;
                z-index: 10;
                border: 1px solid rgb(64 64 64);
                background: rgba(24, 24, 24, 0.8);
                border-radius: 9999px;
                color: #fff;
            }
            #viewer [data-nav="prev"],
            #viewer [data-nav="next"] {
                top: 50%;
                transform: translateY(-50%);
                padding: 0.5rem 0.75rem;
            }
            #viewer [data-nav="prev"] {
                left: 0.75rem;
            }
            #viewer [data-nav="next"] {
                right: 0.75rem;
            }
            #viewer [data-nav="close"] {
                top: 0.75rem;
                right: 0.75rem;
                padding: 0.25rem 0.5rem;
            }
        </style>
    </head>
    <body class="bg-neutral-950 text-neutral-100">
        <!-- Header -->
        <header class="sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-neutral-950/70 border-b border-neutral-800">
            <div class="mx-auto max-w-7xl px-4 py-3 flex items-center gap-3">
                <div class="size-9 rounded-xl bg-gradient-to-br from-purple-500 to-blue-500"></div>
                <div class="flex-1">
                    <h1 class="text-lg sm:text-2xl font-bold">RV Pel√∫cias</h1>
                    <p class="text-sm text-neutral-400">Feisty Pets e pelucias variadas ‚Äî estoque pr√≥prio</p>
                </div>
                <div class="hidden sm:flex items-center gap-2">
                    <a id="whatsHeader" target="_blank" rel="noopener" class="inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold transition bg-emerald-500 hover:bg-emerald-400 text-emerald-950">
                        Falar no WhatsApp
                    </a>
                    <button
                        id="downloadCsvModel"
                        class="inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold transition bg-neutral-800 hover:bg-neutral-700 text-neutral-100 border border-neutral-700 hidden"
                        data-admin
                        title="Baixar modelo CSV"
                    >
                        Modelo CSV
                    </button>
                    <label
                        class="inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold transition bg-neutral-800 hover:bg-neutral-700 text-neutral-100 border border-neutral-700 cursor-pointer hidden"
                        data-admin
                        title="Importar CSV"
                    >
                        <input id="csvInput" type="file" accept=".csv" class="hidden" />
                        Importar CSV
                    </label>
                </div>
            </div>
        </header>

        <!-- Controls -->
        <section class="mx-auto max-w-7xl px-4 py-5">
            <div class="grid gap-3 sm:grid-cols-2 lg:grid-cols-6">
                <label class="block lg:col-span-2">
                    <span class="text-xs text-neutral-400">Buscar</span>
                    <input id="q" type="search" placeholder="Ex.: feisty, ursinho, disney‚Ä¶" class="mt-1 w-full rounded-2xl bg-neutral-900 border border-neutral-800 px-4 py-2.5 outline-none focus:ring-2 focus:ring-blue-500" />
                </label>
                <label class="block">
                    <span class="text-xs text-neutral-400">Categoria</span>
                    <select id="cat" class="mt-1 w-full rounded-2xl bg-neutral-900 border border-neutral-800 px-4 py-2.5 focus:ring-2 focus:ring-blue-500">
                        <option value="">Todas</option>
                        <option>Feisty Pets</option>
                        <option>Disney</option>
                        <option>Outras</option>
                    </select>
                </label>
                <label class="block">
                    <span class="text-xs text-neutral-400">Condi√ß√£o</span>
                    <select id="cond" class="mt-1 w-full rounded-2xl bg-neutral-900 border border-neutral-800 px-4 py-2.5 focus:ring-2 focus:ring-blue-500">
                        <option value="">Todas</option>
                        <option>Novo</option>
                        <option>Usado</option>
                    </select>
                </label>
                <label class="block">
                    <span class="text-xs text-neutral-400">Status</span>
                    <select id="status" class="mt-1 w-full rounded-2xl bg-neutral-900 border border-neutral-800 px-4 py-2.5 focus:ring-2 focus:ring-blue-500">
                        <option value="">Todos</option>
                        <option>Dispon√≠vel</option>
                        <option>Vendido</option>
                        <option>Reservado</option>
                    </select>
                </label>
                <label class="block">
                    <span class="text-xs text-neutral-400">Ordenar por</span>
                    <select id="sort" class="mt-1 w-full rounded-2xl bg-neutral-900 border border-neutral-800 px-4 py-2.5 focus:ring-2 focus:ring-blue-500">
                        <option value="recent">Mais recentes</option>
                        <option value="price_asc">Menor pre√ßo</option>
                        <option value="price_desc">Maior pre√ßo</option>
                        <option value="alpha">A‚ÄìZ</option>
                    </select>
                </label>
            </div>
            <p class="mt-2 text-xs text-neutral-500 hidden" data-admin>
                Dica: para usar suas fotos sem pagar hospedagem, coloque-as numa pasta <code>/images</code> do projeto e referencie por nome do arquivo no CSV (ex.: <code>stitch1.jpg|stitch2.jpg</code>).
            </p>
        </section>

        <!-- Grid -->
        <main class="mx-auto max-w-7xl px-4 pb-24" id="grid" aria-live="polite"></main>

        <!-- Footer -->
        <footer class="border-t border-neutral-800">
            <div class="mx-auto max-w-7xl px-4 py-10 grid sm:grid-cols-2 gap-6 items-center">
                <div>
                    <h2 class="text-lg font-semibold">Quer comprar?</h2>
                    <p class="text-neutral-400">Clique em qualquer an√∫ncio para falar no WhatsApp. Envio para todo o Brasil.</p>
                    <p class="text-neutral-500 text-sm mt-1">Frete: informe "frete a combinar" ou "retirar em m√£os" no CSV para aparecer como etiqueta.</p>
                </div>
                <div class="flex sm:justify-end gap-2">
                    <a id="whatsFooter" target="_blank" rel="noopener" class="inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold transition bg-emerald-500 hover:bg-emerald-400 text-emerald-950">
                        Falar no WhatsApp
                    </a>
                    <label
                        class="inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold transition bg-neutral-800 hover:bg-neutral-700 text-neutral-100 border border-neutral-700 cursor-pointer hidden"
                        data-admin
                    >
                        <input id="csvInput2" type="file" accept=".csv" class="hidden" />
                        Importar CSV
                    </label>
                </div>
            </div>
        </footer>

        <!-- Lightbox Dialog -->
        <dialog id="viewer" class="rounded-2xl p-0 max-w-4xl w-[90vw] bg-neutral-950 border border-neutral-800 relative">
            <img id="viewerImg" alt="Pr√©-visualiza√ß√£o" class="w-full h-auto rounded-2xl" />
        </dialog>

        <script>
            // ======= CONFIGURA√á√ïES R√ÅPIDAS =======
            const ADMIN = location.hash.includes("admin") || new URLSearchParams(location.search).get("admin") === "1" || localStorage.getItem("admin") === "1";
            const WHATS_NUMBER = "5511961580296";
            const STORE_CITY = "S√£o Paulo, SP";

            // ======= DADOS DE PRODUTO =======
            let produtos = [
                {
                    id: "digimons",
                    titulo: "Cole√ß√£o Digimons",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 160.0,
                    moeda: "BRL",
                    tags: ["colecionador"],
                    especie: "Varios",
                    expressao: "Sorriso",
                    tamanho: "aprox. 20‚Äì30 cm",
                    estado: "Novo sem marcas",
                    imagens: ["images/digimons.jpg"],
                    criadoEm: "2025-09-25",
                    descricao: "Para colecionadores.",
                    status: "Dispon√≠vel",
                    frete: "frete a combinar",
                    retirada: "retirar em m√£os",
                    linkExterno: "",
                },
                {
                    id: "bella-bocuda-coelha-rosa",
                    titulo: "Bella Bocuda ‚Äì Coelha Rosa (2 fotos)",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 650.0,
                    moeda: "BRL",
                    tags: ["coelha", "rosa"],
                    especie: "Coelho",
                    tamanho: "",
                    estado: "",
                    imagens: ["images/BELLA_BOCUDA_COELHA_ROSA_1.jpg", "images/BELLA_BOCUDA_COELHA_ROSA_2.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Coelha rosa estilo feisty.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },

                // Disney / Pixar / DreamWorks
                {
                    id: "stitch-lote-gigante",
                    titulo: "Stitch ‚Äì Lote Gigantes",
                    categoria: "Disney",
                    condicao: "Novo",
                    preco: 1400.0,
                    moeda: "BRL",
                    tags: ["stitch", "lote", "disney"],
                    especie: "Alien",
                    tamanho: "",
                    estado: "",
                    imagens: ["images/STITCH_LOTE.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Lote de pel√∫cias do Stitch.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "stitch-lote-pequeno",
                    titulo: "Stitch ‚Äì Lote Pequenos",
                    categoria: "Disney",
                    condicao: "Novo",
                    preco: 150.0,
                    moeda: "BRL",
                    tags: ["stitch", "lote", "disney"],
                    especie: "Alien",
                    tamanho: "",
                    estado: "",
                    imagens: ["images/STITCH_LOTE_2.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Lote de pel√∫cias do Stitch.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "stitch-azul",
                    titulo: "Stitch Azul",
                    categoria: "Disney",
                    condicao: "Novo",
                    preco: 300.0,
                    moeda: "BRL",
                    tags: ["stitch"],
                    especie: "Alien",
                    tamanho: "",
                    estado: "",
                    imagens: ["images/STITCH_AZUL.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Stitch cl√°ssico azul.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "stitch-sorvetinho",
                    titulo: "Stitch ‚Äì Sorvetinho",
                    categoria: "Disney",
                    condicao: "Novo",
                    preco: 300.0,
                    moeda: "BRL",
                    tags: ["stitch", "edi√ß√£o"],
                    especie: "Alien",
                    imagens: ["images/STITCH_SORVETINHO.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Stitch com sorvete.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "stitch-suspensorio",
                    titulo: "Stitch ‚Äì Suspens√≥rio",
                    categoria: "Disney",
                    condicao: "Novo",
                    preco: 300.0,
                    moeda: "BRL",
                    tags: ["stitch"],
                    especie: "Alien",
                    imagens: ["images/STITCH_SUSPENSORIO.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Stitch com suspens√≥rio.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },

                {
                    id: "angel-rosa",
                    titulo: "Angel Rosa (Lilo & Stitch)",
                    categoria: "Disney",
                    condicao: "Novo",
                    preco: 300.0,
                    moeda: "BRL",
                    tags: ["angel", "stitch"],
                    especie: "Alien",
                    imagens: ["images/ANGEL_ROSA.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Angel rosa da franquia Stitch.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "angel-moranguinho",
                    titulo: "Angel Moranguinho (Lilo & Stitch)",
                    categoria: "Disney",
                    condicao: "Novo",
                    preco: 100.0,
                    moeda: "BRL",
                    tags: ["angel", "stitch"],
                    especie: "Alien",
                    imagens: ["images/ANGEL_MORANGUINHO.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Angel com tema morango.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "angel-xepa",
                    titulo: "Angel Xepa (Lilo & Stitch)",
                    categoria: "Disney",
                    condicao: "Novo",
                    preco: 300.0,
                    moeda: "BRL",
                    tags: ["angel", "stitch"],
                    especie: "Alien",
                    imagens: ["images/ANGEL_XEPA.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Variante Angel.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },

                {
                    id: "sullivan-mike",
                    titulo: "Sullivan & Mike (Monstros S.A.) ‚Äì 2 fotos",
                    categoria: "Disney",
                    condicao: "Novo",
                    preco: 80.0,
                    moeda: "BRL",
                    tags: ["monstros sa", "pixar"],
                    especie: "Monstros",
                    imagens: ["images/SULLIVAN_MIKE_1.jpg", "images/SULLIVAN_MIKE_2.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Dupla Mike e Sullivan.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "sullivan-gigante",
                    titulo: "Sullivan Gigante (Monstros S.A.)",
                    categoria: "Disney",
                    condicao: "Novo",
                    preco: 250.0,
                    moeda: "BRL",
                    tags: ["gigante", "monstros sa"],
                    especie: "Monstro",
                    imagens: ["images/SULLIVAN_GIGANTE.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Vers√£o grande do Sullivan.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "toy-story",
                    titulo: "Toy Story (lote)",
                    categoria: "Disney",
                    condicao: "Novo",
                    preco: 80.0,
                    moeda: "BRL",
                    tags: ["toy story", "lote"],
                    especie: "V√°rios",
                    imagens: ["images/TOY_STORY.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Lote de personagens Toy Story.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },

                {
                    id: "tristeza-divertidamente",
                    titulo: "Tristeza ‚Äì Divertida Mente",
                    categoria: "Disney",
                    condicao: "Novo",
                    preco: 350.0,
                    moeda: "BRL",
                    tags: ["divertida mente", "inside out"],
                    especie: "Emo√ß√£o",
                    imagens: ["images/TRISTEZA_DIVERTIDAMENTE.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Personagem Tristeza.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },

                // DreamWorks ‚Äì Como treinar seu drag√£o
                {
                    id: "furia-da-luz",
                    titulo: "F√∫ria da Luz",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 300.0,
                    moeda: "BRL",
                    tags: ["how to train your dragon", "light fury"],
                    especie: "Drag√£o",
                    imagens: ["images/FURIA_DA_LUZ_1.jpg", "images/FURIA_DA_LUZ_2.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Pel√∫cia da F√∫ria da Luz.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "furia-da-noite",
                    titulo: "F√∫ria da Noite (2 fotos)",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 300.0,
                    moeda: "BRL",
                    tags: ["how to train your dragon", "toothless"],
                    especie: "Drag√£o",
                    imagens: ["images/FURIA_DA_NOITE_1.jpg", "images/FURIA_DA_NOITE_2.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Pel√∫cia do Banguela / F√∫ria da Noite.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "furia-da-luz-top",
                    titulo: "F√∫ria da Luz - Olhos Brilhantes",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 350.0,
                    moeda: "BRL",
                    tags: ["how to train your dragon", "light fury"],
                    especie: "Drag√£o",
                    imagens: ["images/FURIA_DA_LUZ_TOP_1.jpg", "images/FURIA_DA_LUZ_TOP_2.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Pel√∫cia da F√∫ria da Luz.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },

                // Super-her√≥is / Marvel
                {
                    id: "homem-aranha",
                    titulo: "Homem-Aranha",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 250.0,
                    moeda: "BRL",
                    tags: ["marvel", "spider-man"],
                    especie: "Her√≥i",
                    imagens: ["images/HOMEM_ARANHA.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Pel√∫cia do Spider-Man.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "hulk",
                    titulo: "Hulk",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 250.0,
                    moeda: "BRL",
                    tags: ["marvel", "hulk"],
                    especie: "Her√≥i",
                    imagens: ["images/HULK.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Pel√∫cia do Hulk.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "hulk-homem-aranha",
                    titulo: "Hulk + Homem-Aranha (lote)",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 400.0,
                    moeda: "BRL",
                    tags: ["marvel", "lote"],
                    especie: "Her√≥is",
                    imagens: ["images/HULK_HOMEM_ARANHA.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Lote com Hulk e Homem-Aranha.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },

                // Animes / Games
                {
                    id: "dragon-ball",
                    titulo: "Dragon Ball",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 80.0,
                    moeda: "BRL",
                    tags: ["anime"],
                    especie: "Personagem",
                    imagens: ["images/DRAGON_BALL.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Pel√∫cia tem√°tica Dragon Ball.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "wartortle",
                    titulo: "Pok√©mon ‚Äì Wartortle",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 350.0,
                    moeda: "BRL",
                    tags: ["pokemon"],
                    especie: "Tartaruga",
                    imagens: ["images/WARTORTLE.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Pel√∫cia do Wartortle.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },

                // Nickelodeon / Bob Esponja
                {
                    id: "bob-esponja-colecao",
                    titulo: "Bob Esponja ‚Äì Cole√ß√£o",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 160.0,
                    moeda: "BRL",
                    tags: ["nickelodeon"],
                    especie: "Esponja",
                    imagens: ["images/BOB_ESPONJA_COLECAO.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Cole√ß√£o Bob Esponja.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
                {
                    id: "patrick-lula-molusco",
                    titulo: "Patrick & Lula Molusco (lote)",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 80.0,
                    moeda: "BRL",
                    tags: ["nickelodeon", "lote"],
                    especie: "Personagens",
                    imagens: ["images/PATRICK_LULA_MOLUSCO.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "Patrick Estrela e Lula Molusco.",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },

                // Outras
                {
                    id: "capivara-lote",
                    titulo: "Capivara (lote)",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 150.0,
                    moeda: "BRL",
                    tags: ["capivara", "lote"],
                    especie: "Capivara",
                    imagens: ["images/CAPIVARA_LOTE.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },

                {
                    id: "pantera-cor-de-rosa",
                    titulo: "Pantera Cor-de-Rosa",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 250.0,
                    moeda: "BRL",
                    tags: ["cl√°ssico"],
                    especie: "Pantera",
                    imagens: ["images/PANTERA_COR_DE_ROSA.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },

                {
                    id: "vaquinha",
                    titulo: "Vaquinha",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 150.0,
                    moeda: "BRL",
                    tags: ["fazenda"],
                    especie: "Vaca",
                    imagens: ["images/VAQUINHA.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },

                {
                    id: "urso-azul",
                    titulo: "Urso Azul",
                    categoria: "Outras",
                    condicao: "Novo",
                    preco: 150.0,
                    moeda: "BRL",
                    tags: ["urso"],
                    especie: "Urso",
                    imagens: ["images/URSO_AZUL.jpg"],
                    criadoEm: "2025-10-05",
                    descricao: "",
                    status: "Dispon√≠vel",
                    frete: "",
                    retirada: "",
                    linkExterno: "",
                },
            ];
            // ======= UTIL =======
            const fmt = new Intl.NumberFormat("pt-BR", { style: "currency", currency: "BRL" });

            function buildWaLink(produto) {
                const base = `https://wa.me/${WHATS_NUMBER}`;
                const msg = encodeURIComponent(`Ol√°! Tenho interesse no produto "${produto.titulo}" (ID: ${produto.id}). Pode me passar mais detalhes?`);
                return `${base}?text=${msg}`;
            }

            function el(tag, classes = "", attrs = {}) {
                const e = document.createElement(tag);
                if (classes) e.className = classes;
                Object.entries(attrs).forEach(([k, v]) => e.setAttribute(k, v));
                return e;
            }

            function applyStateToControls(state) {
                document.getElementById("q").value = state.q || "";
                document.getElementById("cat").value = state.cat || "";
                document.getElementById("cond").value = state.cond || "";
                document.getElementById("status").value = state.status || "";
                document.getElementById("sort").value = state.sort || "recent";
            }

            function readState() {
                const sp = new URLSearchParams(location.hash.slice(1));
                return { q: sp.get("q") || "", cat: sp.get("cat") || "", cond: sp.get("cond") || "", status: sp.get("status") || "", sort: sp.get("sort") || "recent" };
            }

            function writeState(state) {
                const sp = new URLSearchParams(state);
                location.hash = sp.toString();
            }

            // ======= VIEWER MULTIFOTOS =======
O ChatGPT disse:

perfeito ‚Äî entendi o que aconteceu.
o comportamento que voc√™ quer √©:

‚úÖ o modal abrir onde o usu√°rio est√° (sem rolar pro topo)

‚úÖ a imagem abrir centralizada e proporcional (sem cortar, nem desalinhada)

‚úÖ o fundo escurecido como antes

pra isso, o segredo √© n√£o usar showModal() (porque ele for√ßa o foco e o scroll pro topo) e usar show() ‚Äî mas junto com CSS fixo pra cobrir a tela.
abaixo est√° o trecho corrigido da fun√ß√£o openViewer() e o CSS ajustado pra centralizar corretamente:

üß© CSS final do viewer

substitui tudo o que est√° entre <style> e </style> pelo trecho abaixo:

<style>
    :root {
        color-scheme: dark light;
    }
    body {
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    }
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* === VIEWER (Lightbox) === */
    #viewer {
        position: fixed;
        inset: 0;
        display: none; /* inicia oculto */
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.75);
        border: none;
        margin: 0;
        padding: 0;
        z-index: 9999;
    }
    #viewer[open] {
        display: flex; /* s√≥ aparece quando aberto */
    }
    #viewerImg {
        max-width: 90vw;
        max-height: 90vh;
        width: auto;
        height: auto;
        object-fit: contain;
        border-radius: 1rem;
        margin: auto;
        display: block;
    }
    #viewer [data-nav] {
        position: absolute;
        z-index: 10;
        border: 1px solid rgb(64 64 64);
        background: rgba(24, 24, 24, 0.8);
        border-radius: 9999px;
        color: #fff;
    }
    #viewer [data-nav="prev"],
    #viewer [data-nav="next"] {
        top: 50%;
        transform: translateY(-50%);
        padding: 0.5rem 0.75rem;
    }
    #viewer [data-nav="prev"] {
        left: 0.75rem;
    }
    #viewer [data-nav="next"] {
        right: 0.75rem;
    }
    #viewer [data-nav="close"] {
        top: 0.75rem;
        right: 0.75rem;
        padding: 0.25rem 0.5rem;
    }
</style>

‚öôÔ∏è Fun√ß√£o openViewer() corrigida

troque apenas essa fun√ß√£o no seu <script>:

function openViewer(p, startIndex = 0) {
    const viewer = document.getElementById("viewer");
    const viewerImg = document.getElementById("viewerImg");

    if (!Array.isArray(p.imagens) || p.imagens.length === 0) return;

    const hasMany = p.imagens.length > 1;
    let idx = Math.max(0, Math.min(startIndex, p.imagens.length - 1));

    // cria bot√µes (setas + fechar)
    let btnPrev = viewer.querySelector('[data-nav="prev"]');
    let btnNext = viewer.querySelector('[data-nav="next"]');
    let btnClose = viewer.querySelector('[data-nav="close"]');

    if (!btnPrev) {
        btnPrev = document.createElement("button");
        btnPrev.dataset.nav = "prev";
        btnPrev.textContent = "‚Äπ";
        viewer.appendChild(btnPrev);
    }
    if (!btnNext) {
        btnNext = document.createElement("button");
        btnNext.dataset.nav = "next";
        btnNext.textContent = "‚Ä∫";
        viewer.appendChild(btnNext);
    }
    if (!btnClose) {
        btnClose = document.createElement("button");
        btnClose.dataset.nav = "close";
        btnClose.textContent = "‚úï";
        btnClose.title = "Fechar";
        viewer.appendChild(btnClose);
    }

    // mostra/oculta setas
    btnPrev.style.display = hasMany ? "" : "none";
    btnNext.style.display = hasMany ? "" : "none";

    const show = (i) => {
        idx = (i + p.imagens.length) % p.imagens.length;
        viewerImg.src = p.imagens[idx];
    };

    // eventos
    const cleanup = () => {
        viewer.removeAttribute("open");
        document.removeEventListener("keydown", onKey);
        viewer.removeEventListener("click", onBackdrop);
        btnClose.removeEventListener("click", onClose);
        viewerImg.removeEventListener("click", onImgClick);
        if (hasMany) {
            btnPrev.removeEventListener("click", onPrev);
            btnNext.removeEventListener("click", onNext);
        }
    };
    const onKey = (e) => {
        if (e.key === "Escape") cleanup();
        if (!hasMany) return;
        if (e.key === "ArrowRight" || e.key === " ") show(idx + 1);
        if (e.key === "ArrowLeft") show(idx - 1);
    };
    const onBackdrop = (e) => {
        if (e.target === viewer) cleanup();
    };
    const onPrev = () => show(idx - 1);
    const onNext = () => show(idx + 1);
    const onImgClick = () => {
        if (hasMany) show(idx + 1);
    };
    const onClose = () => cleanup();

    show(idx);
    viewer.setAttribute("open", ""); // abre sem rolar pro topo
    document.addEventListener("keydown", onKey);
    viewer.addEventListener("click", onBackdrop);
    btnClose.addEventListener("click", onClose);
    viewerImg.addEventListener("click", onImgClick);
    if (hasMany) {
        btnPrev.addEventListener("click", onPrev);
        btnNext.addEventListener("click", onNext);
    }
}

            // ======= FILTRO/ORDENA√á√ÉO & RENDER =======
            function filterAndSort(list, state) {
                let r = [...list];
                if (state.q) {
                    const ql = state.q.toLowerCase();
                    r = r.filter((p) => (p.titulo || "").toLowerCase().includes(ql) || (p.tags || []).join(" ").toLowerCase().includes(ql) || (p.especie || "").toLowerCase().includes(ql) || (p.expressao || "").toLowerCase().includes(ql));
                }
                if (state.cat) r = r.filter((p) => p.categoria === state.cat);
                if (state.cond) r = r.filter((p) => p.condicao === state.cond);
                if (state.status) r = r.filter((p) => (p.status || "") === state.status);

                switch (state.sort) {
                    case "price_asc":
                        r.sort((a, b) => a.preco - b.preco);
                        break;
                    case "price_desc":
                        r.sort((a, b) => b.preco - a.preco);
                        break;
                    case "alpha":
                        r.sort((a, b) => a.titulo.localeCompare(b.titulo));
                        break;
                    default:
                        r.sort((a, b) => new Date(b.criadoEm) - new Date(a.criadoEm));
                }
                return r;
            }

            function render(list) {
                const grid = document.getElementById("grid");
                grid.innerHTML = "";

                if (!list.length) {
                    const empty = el("div", "text-center py-20 text-neutral-400");
                    empty.textContent = "Nenhum item encontrado. Tente limpar os filtros ou buscar por outro termo.";
                    grid.appendChild(empty);
                    return;
                }

                const wrap = el("div", "grid gap-4 sm:grid-cols-2 lg:grid-cols-3");
                list.forEach((p) => {
                    const card = el("article", "group rounded-2xl border border-neutral-800 bg-neutral-900/60 hover:bg-neutral-900 transition overflow-hidden");

                    const imgWrap = el("div", "relative aspect-[4/3] bg-neutral-900/60 overflow-hidden");
                    const img = el("img", "h-full w-full object-contain p-1 bg-neutral-900");
                    img.src = p.imagens && p.imagens[0] ? p.imagens[0] : "";
                    img.alt = p.titulo || "Produto";
                    img.loading = "lazy";
                    img.decoding = "async";
                    imgWrap.appendChild(img);

                    // badges
                    if (p.condicao) {
                        const badge = el("span", "absolute top-2 left-2 rounded-full bg-neutral-950/70 border border-neutral-700 px-2 py-1 text-xs");
                        badge.textContent = p.condicao;
                        imgWrap.appendChild(badge);
                    }
                    if (p.status && p.status !== "Dispon√≠vel") {
                        const sold = el("span", "absolute top-2 right-2 rounded-full bg-neutral-950/70 border border-neutral-700 px-2 py-1 text-xs");
                        sold.textContent = p.status.toUpperCase();
                        imgWrap.appendChild(sold);
                    }
                    if (p.frete) {
                        const b2 = el("span", "absolute bottom-2 left-2 rounded-full bg-neutral-950/70 border border-neutral-700 px-2 py-1 text-xs");
                        b2.textContent = p.frete;
                        imgWrap.appendChild(b2);
                    }
                    if (p.retirada) {
                        const b3 = el("span", "absolute bottom-2 right-2 rounded-full bg-neutral-950/70 border border-neutral-700 px-2 py-1 text-xs");
                        b3.textContent = p.retirada;
                        imgWrap.appendChild(b3);
                    }

                    // abrir viewer (multi-fotos)
                    imgWrap.addEventListener("click", () => openViewer(p, 0));

                    const content = el("div", "p-4 space-y-2");
                    const title = el("h3", "font-semibold line-clamp-2");
                    title.textContent = p.titulo || "Sem t√≠tulo";

                    const meta = el("p", "text-sm text-neutral-400");
                    const bits = [p.especie, p.expressao, p.tamanho].filter(Boolean).join(" ‚Ä¢ ");
                    meta.textContent = bits || "¬†";

                    const priceRow = el("div", "flex items-center justify-between gap-2");
                    const price = el("div", "text-lg font-bold");
                    price.textContent = isFinite(p.preco) ? fmt.format(Number(p.preco)) : "‚Äî";
                    const city = el("span", "text-xs text-neutral-400");
                    city.textContent = STORE_CITY;
                    priceRow.append(price, city);

                    const tags = el("div", "flex flex-wrap gap-1");
                    (p.tags || []).forEach((t) => {
                        const chip = el("span", "rounded-full border border-neutral-700 px-2 py-0.5 text-xs text-neutral-300");
                        chip.textContent = t;
                        tags.appendChild(chip);
                    });

                    const actions = el("div", "grid grid-cols-2 gap-2 pt-1");
                    const btnWa = el("a", "inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold transition bg-emerald-500 hover:bg-emerald-400 text-emerald-950 col-span-2", {
                        href: "#",
                        target: "_blank",
                        rel: "noopener",
                        "aria-label": "Falar no WhatsApp",
                    });
                    btnWa.textContent = "Falar no WhatsApp";
                    btnWa.addEventListener("click", (e) => {
                        e.preventDefault();
                        window.open(buildWaLink(p), "_blank");
                    });

                    const btnExt = el("a", "inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold transition bg-neutral-800 hover:bg-neutral-700 text-neutral-100 border border-neutral-700", {
                        href: p.linkExterno || "#",
                        target: "_blank",
                        rel: "noopener",
                    });
                    btnExt.textContent = "Ver an√∫ncio";
                    if (!p.linkExterno) btnExt.classList.add("pointer-events-none", "opacity-50");

                    const btnFotos = el("button", "inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold transition bg-neutral-800 hover:bg-neutral-700 text-neutral-100 border border-neutral-700");
                    btnFotos.textContent = "Mais fotos";
                    btnFotos.addEventListener("click", () => openViewer(p, 0));

                    if ((p.status || "") !== "Dispon√≠vel") btnWa.classList.add("pointer-events-none", "opacity-50");

                    actions.append(btnExt, btnFotos, btnWa);
                    content.append(title, meta, priceRow, tags, actions);
                    card.append(imgWrap, content);
                    wrap.appendChild(card);
                });

                grid.appendChild(wrap);
                document.getElementById("whatsHeader").href = `https://wa.me/${WHATS_NUMBER}`;
                document.getElementById("whatsFooter").href = `https://wa.me/${WHATS_NUMBER}`;
            }

            // ======= CSV =======
            const CSV_HEADERS = ["id", "titulo", "categoria", "condicao", "preco", "moeda", "tags", "especie", "expressao", "tamanho", "peso", "estado", "imagens", "criadoEm", "descricao", "status", "frete", "retirada", "linkExterno"];

            function detectDelimiter(headerLine) {
                if ((headerLine.match(/;/g) || []).length >= (headerLine.match(/,/g) || []).length) return ";";
                return ",";
            }

            function downloadCsvModel() {
                const rows = [CSV_HEADERS.join(",")];
                rows.push("stitch-02,Disney ‚Äì Stitch M√©dio,Disney,Novo,299.9,BRL,disney|fofo,Alien,Sorriso,40 cm,,Lacrado,images/stitch2.jpg,2025-09-20,Stitch lind√£o,Dispon√≠vel,frete a combinar,,");
                const blob = new Blob([rows.join("")], { type: "text/csv;charset=utf-8;" });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.href = url;
                a.download = "modelo_produtos.csv";
                a.click();
                URL.revokeObjectURL(url);
            }

            function parseCsv(text) {
                const lines = text.split(/\r?\n/).filter(Boolean);
                if (!lines.length) return [];
                const delim = detectDelimiter(lines[0]);
                const header = lines
                    .shift()
                    .split(delim)
                    .map((h) => h.trim());
                const idx = (name) => header.indexOf(name);
                return lines.map((l) => {
                    const c = l.split(delim).map((v) => v.trim());
                    return {
                        id: c[idx("id")] || "",
                        titulo: c[idx("titulo")] || "",
                        categoria: c[idx("categoria")] || "",
                        condicao: c[idx("condicao")] || "",
                        preco: Number((c[idx("preco")] || "").replace(",", ".")) || 0,
                        moeda: c[idx("moeda")] || "BRL",
                        tags: (c[idx("tags")] || "").split("|").filter(Boolean),
                        especie: c[idx("especie")] || "",
                        expressao: c[idx("expressao")] || "",
                        tamanho: c[idx("tamanho")] || "",
                        peso: c[idx("peso")] || "",
                        estado: c[idx("estado")] || "",
                        imagens: (c[idx("imagens")] || "").split("|").filter(Boolean),
                        criadoEm: c[idx("criadoEm")] || new Date().toISOString().slice(0, 10),
                        descricao: c[idx("descricao")] || "",
                        status: c[idx("status")] || "Dispon√≠vel",
                        frete: c[idx("frete")] || "",
                        retirada: c[idx("retirada")] || "",
                        linkExterno: c[idx("linkExterno")] || "",
                    };
                });
            }

            async function handleCsvFile(file) {
                try {
                    const text = await file.text();
                    const items = parseCsv(text);
                    const map = new Map(produtos.map((p) => [p.id, p]));
                    items.forEach((i) => map.set(i.id, i));
                    produtos = Array.from(map.values());
                    const st = readState();
                    render(filterAndSort(produtos, st));
                    alert(`Importados ${items.length} item(ns).`);
                } catch (e) {
                    console.error(e);
                    alert("Falha ao importar CSV. Verifique o delimitador (use ; ou ,) e os cabe√ßalhos.");
                }
            }

            async function autoLoadCsv() {
                try {
                    const res = await fetch("produtos.csv", { cache: "no-store" });
                    if (!res.ok) return;
                    const text = await res.text();
                    const items = parseCsv(text);
                    if (items.length) {
                        produtos = items;
                        const st = readState();
                        render(filterAndSort(produtos, st));
                        console.info(`Carregado produtos.csv (${items.length} itens).`);
                    }
                } catch (e) {
                    console.info("Sem produtos.csv");
                }
            }

            // ======= INIT =======
            const controls = ["q", "cat", "cond", "status", "sort"];
            controls.forEach((id) => {
                document.getElementById(id).addEventListener("input", () => {
                    const state = {
                        q: document.getElementById("q").value.trim(),
                        cat: document.getElementById("cat").value,
                        cond: document.getElementById("cond").value,
                        status: document.getElementById("status").value,
                        sort: document.getElementById("sort").value,
                    };
                    writeState(state);
                    render(filterAndSort(produtos, state));
                });
            });

            window.addEventListener("hashchange", () => {
                const st = readState();
                applyStateToControls(st);
                render(filterAndSort(produtos, st));
            });

            function setAdminMode(on) {
                document.querySelectorAll("[data-admin]").forEach((el) => el.classList.toggle("hidden", !on));
                if (on) localStorage.setItem("admin", "1");
                else localStorage.removeItem("admin");
            }
            setAdminMode(ADMIN);

            if (ADMIN) {
                const btnModel = document.getElementById("downloadCsvModel");
                if (btnModel) btnModel.addEventListener("click", downloadCsvModel);
                const inp1 = document.getElementById("csvInput");
                if (inp1)
                    inp1.addEventListener("change", (e) => {
                        if (e.target.files[0]) handleCsvFile(e.target.files[0]);
                    });
                const inp2 = document.getElementById("csvInput2");
                if (inp2)
                    inp2.addEventListener("change", (e) => {
                        if (e.target.files[0]) handleCsvFile(e.target.files[0]);
                    });
            }

            window.addEventListener("keydown", (e) => {
                if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "a") {
                    const anyAdminEl = document.querySelector("[data-admin]");
                    const currentlyVisible = anyAdminEl && !anyAdminEl.classList.contains("hidden");
                    setAdminMode(!currentlyVisible);
                }
            });

            // Primeira renderiza√ß√£o
            const initial = readState();
            applyStateToControls(initial);
            render(filterAndSort(produtos, initial));
            autoLoadCsv();
        </script>
    </body>
</html>
